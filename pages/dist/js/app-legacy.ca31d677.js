(function(){var t={9326:function(t,e,s){"use strict";s(6992),s(8674),s(9601),s(7727);var n=Vue,a=s.n(n),i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"app",tabindex:"0"},on:{keydown:t.keyupHandle}},["menu"===t.gameStatus?s("menu-module",{on:{start:t.gameStart}}):t._e(),s("div",{staticClass:"sky-wrap"},[s("div",{directives:[{name:"show",rawName:"v-show",value:"start"===t.gameStatus,expression:"gameStatus === 'start'"}],staticClass:"total"},[t._v(t._s(Math.floor(t.total)))]),s("cloud-model"),s("obstruction-model",{ref:"obsModule",attrs:{speed:t.speed,userStatus:t.userStatus},on:{gameOver:t.gameOver}}),s("user-model",{staticClass:"user-model",attrs:{speed:t.speed,status:t.userStatus}})],1),s("div",{staticClass:"ground-wrap"}),s("game-over",{directives:[{name:"show",rawName:"v-show",value:"over"===t.gameStatus,expression:"gameStatus === 'over'"}],attrs:{total:t.total},on:{restart:t.gameStart,goHome:function(e){t.gameStatus="menu"}}})],1)},r=[],u=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"menu-wrap"},[s("div",{staticClass:"title"},[t._v("奔跑吧，程序员")]),s("div",{staticClass:"menu-total"},[s("div",{staticClass:"total-desc"},[t._v("全员已累计奔跑")]),s("div",{staticClass:"total-menu"},[t._v(t._s(t.totalLoading?"加载中":t.total+"m"))])]),s("div",{staticClass:"menu-box"},[s("div",{staticClass:"menu-item",on:{click:function(e){return t.$emit("start")}}},[t._v("开始游戏")]),s("div",{staticClass:"menu-item",on:{click:function(e){t.showRanking=!0}}},[t._v("排行榜")]),s("div",{staticClass:"menu-item",on:{click:function(e){t.showRule=!0}}},[t._v("游戏规则")]),s("a",{staticClass:"menu-item",attrs:{href:"https://juejin.cn/post/7103423600660578341/",target:"_blank"}},[t._v("点赞作者")])]),s("div",{directives:[{name:"show",rawName:"v-show",value:t.showRule,expression:"showRule"}],staticClass:"log-mask",on:{click:function(e){t.showRule=!1}}},[s("div",{staticClass:"log-wrap",on:{click:function(t){t.stopPropagation()}}},[t._m(0),t._m(1),t._m(2),t._m(3),t._m(4),t._m(5),t._m(6),t._m(7)])]),s("div",{directives:[{name:"show",rawName:"v-show",value:t.showRanking,expression:"showRanking"}],staticClass:"log-mask",on:{click:function(e){t.showRanking=!1}}},[s("div",{staticClass:"log-wrap",on:{click:function(t){t.stopPropagation()}}},[t.rankingList&&t.rankingList.length>0?s("div",{staticClass:"rank-list"},[t._l(t.rankingList,(function(e,n){return s("div",{key:e._id,staticClass:"rank-item"},[s("div",[t._v(" "+t._s(n+1)+"、"),s("a",{staticClass:"rank-username",attrs:{href:"https://juejin.cn/user/"+e.uid,target:"_blank"}},[t._v(t._s(e.username))])]),s("div",{staticClass:"rank-value"},[t._v(t._s(e.value))])])})),s("p",{staticClass:"rank-tips"},[t._v("*由于未设置防作弊机制，排行榜仅供参考")])],2):s("div",{staticClass:"rank-empty"},[t._v("暂无排行榜数据")])])])])},o=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("p",{staticClass:"rule-item"},[t._v(" 游戏背景："),s("br"),t._v(" 夏天到了，又到了露肉的季节，你是否还随身携带着游泳圈？快来和大家一起跑步吧！ ")])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("p",{staticClass:"rule-item"},[t._v(" 游戏规则："),s("br"),t._v(" 游戏开始后，游戏人物会主动向前奔跑，玩家需控制人物跳跃或者下滑躲避障碍物，随着游戏的进行，障碍物的数量和游戏人物的速度都会随之改变，当游戏人物碰到障碍物时，游戏结束 ")])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("p",{staticClass:"rule-item"},[t._v(" 操作说明："),s("br"),t._v(" 按键 w 或 ↑ 控制人物跳跃"),s("br"),t._v(" 按键 s 或 ↓ 控制人物下滑"),s("br")])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("p",{staticClass:"rule-item"},[t._v(" 个人成绩上传："),s("br"),t._v(" 游戏结束后玩家可上传本轮游戏的成绩，排行榜和总里程均依照此处成绩生成，上传成绩时需要填写本人掘金id，从而获取掘金用户名，一名用户可多次上传成绩，但是同样的成绩不可重复上传，游戏未设置防作弊机制，娱乐而已，希望大家不要作弊 ")])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("p",{staticClass:"rule-item"},[t._v(" 总里程："),s("br"),t._v(" 游戏首页会显示所有用户的每一次上传成绩总和 ")])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("p",{staticClass:"rule-item"},[t._v(" 排行榜："),s("br"),t._v(" 排行榜会取所有用户成绩前10名，单名玩家可重复上榜 ")])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("p",{staticClass:"rule-item"},[t._v(" 声明："),s("br"),t._v(" 以上三项功能均需服务器支撑，由于服务器配置较低，也未设置防范机制，请大家不要恶意攻击，如有变故以上三项功能取消 ")])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("p",{staticClass:"rule-item"},[t._v(" 支持作者："),s("br"),t._v(" 文章地址："),s("a",{attrs:{href:"https://juejin.cn/post/7103423600660578341/"}},[t._v("https://juejin.cn/post/7103423600660578341/")]),s("br"),t._v(" 游戏完全开源，如果对你有所帮助或者你觉得这个小游戏还可以，希望可以点击文章链接给个赞和评论"),s("br"),t._v(" 源码地址："),s("br")])}],c=axios,l=s.n(c),d={name:"menuModule",data:function(){return{showRule:!1,showRanking:!1,total:0,totalLoading:!0,rankingList:[],rankLoading:!0}},mounted:function(){var t=this;l().get("http://summer.node.pkec.net/api/getTotal").then((function(e){t.total=e.data.data||0,t.totalLoading=!1})),l().get("http://summer.node.pkec.net/api/getRankingList").then((function(e){t.rankingList=e.data.data,t.rankLoading=!1}))}},m=d,p=s(1001),f=(0,p.Z)(m,u,o,!1,null,"5ac20429",null),v=f.exports,h=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"wrap"},[s("img",{ref:"userImg",staticClass:"user-img",attrs:{src:t.userPic}})])},g=[],_=(s(9653),{name:"userModel",props:{speed:{type:Number,default:1},status:{type:String,default:""}},data:function(){return{userRunList:[],slideList:[],userPic:"",standPic:s(7665),userJumpPic:s(6521),userSlidePic:s(2709),runInterval:null,lastRunTime:0}},watch:{status:{handler:function(t){cancelAnimationFrame(this.runInterval),this.$refs.userImg&&this.$refs.userImg.classList.remove("slide","jump"),"run"===t?this.run():"slide"===t?(this.$refs.userImg.classList.add("slide"),this.slide()):"jump"===t?(this.$refs.userImg.classList.add("jump"),this.jump()):this.userPic=this.standPic},immediate:!0}},mounted:function(){for(var t=0;t<10;t++){var e=s(3881)("./Run_00"+t+".png");this.userRunList.push(e)}},methods:{run:function(){var t=this,e=this,s=0,n=function n(){var a=(new Date).getTime();a-t.lastRunTime>120-20*t.speed&&(s>t.userRunList.length-1&&(s=0),e.userPic=t.userRunList[s],s++,t.lastRunTime=a),t.runInterval=requestAnimationFrame(n)};n()},slide:function(){this.userPic=this.userSlidePic},jump:function(){this.userPic=this.userJumpPic}}}),b=_,C=(0,p.Z)(b,h,g,!1,null,"52ed3202",null),k=C.exports,w=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{ref:"cloudWrap",staticClass:"cloud-wrap"})},x=[],S=(s(7042),{name:"cloud-model",data:function(){return{screenWidth:document.documentElement.clientWidth,lastCreateTime:0,cloudFrequency:10,cloudSpeed:1}},mounted:function(){this.createCloud()},methods:{createCloud:function(){var t=this,e=(new Date).getTime();if(e-this.lastCreateTime>3e3){var s=document.createElement("div");s.className="cloud-item",s.cloudScale=Math.random(),s.style.transform="scale("+s.cloudScale+")",s.style.opacity=s.cloudScale;var n=this.screenWidth;s.style.left=n+"px";var a=400*Math.random();s.style.top=a+"px",this.$refs.cloudWrap.appendChild(s);var i=function e(){var n=t.cloudSpeed*s.cloudScale,a=+s.style.left.slice(0,-2);s.style.left=a-n+"px",s.offsetLeft<-s.offsetWidth?t.$refs.cloudWrap.removeChild(s):requestAnimationFrame(e)};i(),i(),this.lastCreateTime=e}requestAnimationFrame(this.createCloud)}}}),y=S,R=(0,p.Z)(y,w,x,!1,null,null,null),O=R.exports,M=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{ref:"obstructionWrap",staticClass:"obstruction-wrap"})},$=[],j=(s(1038),s(8783),{name:"obstructionModel",props:{speed:{type:Number,default:1},userStatus:{type:String,default:""}},data:function(){return{screenWidth:document.documentElement.clientWidth,obsInterval:[400,600],obsMoveInterval:null}},mounted:function(){},methods:{init:function(){this.$refs.obstructionWrap.innerHTML="",this.createObstruction(),this.obsMove()},createObstruction:function(){var t=document.createElement("div"),e=Math.random()>.5?"top":"bottom";t.className="obs-list-"+e,t.state=e;var s=Math.ceil(Math.random()*(this.speed-2));s=Math.max(s,1);for(var n=0;n<s;n++){var a=document.createElement("div");a.className="obs-item",t.appendChild(a)}t.style.left=this.screenWidth+"px",t.nextSpace=Math.random()*(this.obsInterval[1]-this.obsInterval[0])+this.obsInterval[0],this.$refs.obstructionWrap.appendChild(t)},obsMove:function(){for(var t=this.$refs.obstructionWrap.children,e=Array.from(t),s=null,n=0;n<e.length;n++){var a=e[n];a.offsetLeft<-a.offsetWidth?this.$refs.obstructionWrap.removeChild(a):a.style.left=a.offsetLeft-3*this.speed+"px",s||a.offsetLeft>this.screenWidth/2-60-a.offsetWidth&&(s=a)}if(s.offsetLeft<this.screenWidth/2+60)if("top"===s.state){if("slide"!==this.userStatus)return void this.$emit("gameOver")}else if("jump"!==this.userStatus)return void this.$emit("gameOver");var i=e[e.length-1];i.offsetLeft<this.screenWidth-i.offsetWidth-i.nextSpace&&this.createObstruction(),this.obsMoveInterval=requestAnimationFrame(this.obsMove)},gameOver:function(){cancelAnimationFrame(this.obsMoveInterval)}}}),L=j,E=(0,p.Z)(L,M,$,!1,null,null,null),W=E.exports,I=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"gameover-wrap"},[s("div",{staticClass:"title"},[t._v("游戏结束!")]),s("div",{staticClass:"menu-total"},[s("div",{staticClass:"total-desc"},[t._v("您的成绩为")]),s("div",{staticClass:"total-menu"},[t._v(t._s(Math.floor(t.total))+"m")])]),s("div",{staticClass:"menu-box"},[s("div",{staticClass:"menu-item",on:{click:function(e){return t.$emit("restart")}}},[t._v("再来一次")]),s("div",{staticClass:"menu-item",on:{click:function(e){return t.$emit("goHome")}}},[t._v("返回首页")]),s("a",{staticClass:"menu-item",attrs:{href:"https://juejin.cn/post/7103423600660578341/",target:"_blank"}},[t._v("点赞作者")])]),s("div",{staticClass:"upload-wrap"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.uid,expression:"uid"}],staticClass:"upload-input",attrs:{type:"text",placeholder:"请输入您的掘金ID"},domProps:{value:t.uid},on:{input:function(e){e.target.composing||(t.uid=e.target.value)}}}),s("div",{staticClass:"upload-btn",on:{click:t.uploadScore}},[t._v("上传成绩")])]),s("p",{staticClass:"tips"},[t._v("掘金id为您的个人主页链接juejin.cn/user/后面的数字")])])},P=[],T={name:"gameOver",props:{total:{type:Number,default:0}},data:function(){return{uid:""}},methods:{uploadScore:function(){this.uid?l().post("http://summer.node.pkec.net/api/upload",{uid:this.uid,value:Math.floor(this.total)}).then((function(t){t.data.code,alert(t.data.message)})):alert("请输入您的掘金UID")}}},N=T,F=(0,p.Z)(N,I,P,!1,null,"0a5bcb24",null),A=F.exports,q={name:"App",data:function(){return{gameStatus:"menu",speed:2,userStatus:"",canOperate:!1,groundMoveInterval:null,total:0}},components:{userModel:k,cloudModel:O,obstructionModel:W,menuModule:v,gameOver:A},mounted:function(){},methods:{gameStart:function(){this.gameStatus="start",this.userStatus="run",this.total=0,this.speed=2,this.canOperate=!0,this.groundScroll(),this.$refs.obsModule.init()},groundScroll:function(){var t=this,e=document.querySelector(".ground-wrap"),s=0;e.style.backgroundPositionX=s+"px";var n=function n(){s<=-600&&(s=0),s-=3*t.speed,t.total+=t.speed/10,t.total>=1e5?t.speed=6:t.total>=8e3?t.speed=5.5:t.total>=6e3?t.speed=5:t.total>=4e3?t.speed=4.5:t.total>=2e3?t.speed=4:t.total>=1e3?t.speed=3.5:t.total>=500?t.speed=3:t.total>=200&&(t.speed=2.5),e.style.backgroundPositionX=s+"px",t.groundMoveInterval=requestAnimationFrame(n)};n()},keyupHandle:function(t){var e=this;this.canOperate&&(this.canOperate=!1,87===t.keyCode||38===t.keyCode?(this.userStatus="jump",setTimeout((function(){e.canOperate=!0,e.userStatus="run"}),Math.max(900-100*this.speed,400))):83===t.keyCode||40===t.keyCode?(this.userStatus="slide",setTimeout((function(){e.canOperate=!0,e.userStatus="run"}),Math.max(900-100*this.speed,400))):this.canOperate=!0)},gameOver:function(){cancelAnimationFrame(this.groundMoveInterval),this.userStatus="",this.canOperate=!1,this.gameStatus="over"}}},D=q,Z=(0,p.Z)(D,i,r,!1,null,null,null),H=Z.exports;a().config.productionTip=!1,new(a())({render:function(t){return t(H)}}).$mount("#app")},3881:function(t,e,s){var n={"./Run_000.png":6521,"./Run_001.png":8967,"./Run_002.png":4534,"./Run_003.png":3732,"./Run_004.png":2820,"./Run_005.png":1099,"./Run_006.png":9835,"./Run_007.png":5290,"./Run_008.png":5068,"./Run_009.png":4527};function a(t){var e=i(t);return s(e)}function i(t){if(!s.o(n,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return n[t]}a.keys=function(){return Object.keys(n)},a.resolve=i,t.exports=a,a.id=3881},6521:function(t,e,s){"use strict";t.exports=s.p+"img/Run_000.c98fa765.png"},8967:function(t,e,s){"use strict";t.exports=s.p+"img/Run_001.1f2ece94.png"},4534:function(t,e,s){"use strict";t.exports=s.p+"img/Run_002.98604a48.png"},3732:function(t,e,s){"use strict";t.exports=s.p+"img/Run_003.3a5c442a.png"},2820:function(t,e,s){"use strict";t.exports=s.p+"img/Run_004.179e9e2d.png"},1099:function(t,e,s){"use strict";t.exports=s.p+"img/Run_005.d7551a9b.png"},9835:function(t,e,s){"use strict";t.exports=s.p+"img/Run_006.45223eb0.png"},5290:function(t,e,s){"use strict";t.exports=s.p+"img/Run_007.447bcffb.png"},5068:function(t,e,s){"use strict";t.exports=s.p+"img/Run_008.cd3ccf78.png"},4527:function(t,e,s){"use strict";t.exports=s.p+"img/Run_009.431a9b06.png"},2709:function(t,e,s){"use strict";t.exports=s.p+"img/Sliding_000.8a4693f8.png"},7665:function(t,e,s){"use strict";t.exports=s.p+"img/stand.c4af051d.png"}},e={};function s(n){var a=e[n];if(void 0!==a)return a.exports;var i=e[n]={exports:{}};return t[n](i,i.exports,s),i.exports}s.m=t,function(){var t=[];s.O=function(e,n,a,i){if(!n){var r=1/0;for(l=0;l<t.length;l++){n=t[l][0],a=t[l][1],i=t[l][2];for(var u=!0,o=0;o<n.length;o++)(!1&i||r>=i)&&Object.keys(s.O).every((function(t){return s.O[t](n[o])}))?n.splice(o--,1):(u=!1,i<r&&(r=i));if(u){t.splice(l--,1);var c=a();void 0!==c&&(e=c)}}return e}i=i||0;for(var l=t.length;l>0&&t[l-1][2]>i;l--)t[l]=t[l-1];t[l]=[n,a,i]}}(),function(){s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,{a:e}),e}}(),function(){s.d=function(t,e){for(var n in e)s.o(e,n)&&!s.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})}}(),function(){s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){s.p=""}(),function(){var t={143:0};s.O.j=function(e){return 0===t[e]};var e=function(e,n){var a,i,r=n[0],u=n[1],o=n[2],c=0;if(r.some((function(e){return 0!==t[e]}))){for(a in u)s.o(u,a)&&(s.m[a]=u[a]);if(o)var l=o(s)}for(e&&e(n);c<r.length;c++)i=r[c],s.o(t,i)&&t[i]&&t[i][0](),t[i]=0;return s.O(l)},n=self["webpackChunkjuejin_summer"]=self["webpackChunkjuejin_summer"]||[];n.forEach(e.bind(null,0)),n.push=e.bind(null,n.push.bind(n))}();var n=s.O(void 0,[998],(function(){return s(9326)}));n=s.O(n)})();
//# sourceMappingURL=app-legacy.ca31d677.js.map